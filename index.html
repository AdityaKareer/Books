<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Library</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background: #1a1410;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .library-view {
            position: relative;
            padding: 80px 60px;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
        }

        .rain-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.6;
        }

        .raindrop {
            position: absolute;
            width: 2px;
            height: 20px;
            background: linear-gradient(transparent, rgba(255, 255, 255, 0.4));
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }

        .window-glow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at 50% 20%, rgba(255, 200, 100, 0.15) 0%, transparent 60%);
            pointer-events: none;
            z-index: 0;
        }

        .wooden-shelf {
            position: absolute;
            width: 100%;
            height: 8px;
            background: linear-gradient(180deg, #4a3728 0%, #2d1f15 100%);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            z-index: 0;
        }

        .header {
            position: relative;
            z-index: 2;
            margin-bottom: 60px;
            animation: fadeIn 0.8s ease;
        }

        .header h1 {
            color: #f5e6d3;
            font-size: 52px;
            font-weight: 300;
            letter-spacing: -1px;
            margin-bottom: 15px;
            text-shadow: 2px 2px 20px rgba(0, 0, 0, 0.5);
        }

        .header p {
            color: rgba(245, 230, 211, 0.7);
            font-size: 20px;
            font-weight: 300;
            font-style: italic;
        }

        .ambient-sound {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 10;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 12px 20px;
            border-radius: 25px;
            color: #f5e6d3;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ambient-sound:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.05);
        }

        .books-shelf {
            position: relative;
            z-index: 2;
            margin-bottom: 100px;
        }

        .shelf-row {
            position: relative;
            margin-bottom: 80px;
            padding-bottom: 20px;
        }

        .shelf-row::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: -60px;
            right: -60px;
            height: 12px;
            background: linear-gradient(180deg, #4a3728 0%, #2d1f15 50%, #1a1208 100%);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.6);
        }

        .books-row {
            display: flex;
            gap: 30px;
            padding: 0 20px;
            flex-wrap: wrap;
            animation: fadeIn 1s ease 0.2s backwards;
        }

        .book-item {
            cursor: pointer;
            transition: all 0.4s ease;
            perspective: 1000px;
            flex: 0 0 auto;
        }

        .book-item:hover {
            transform: translateY(-15px) rotateY(5deg);
            filter: brightness(1.2);
        }

        .book-spine {
            width: 180px;
            height: 280px;
            position: relative;
            transform-style: preserve-3d;
            transition: all 0.4s ease;
        }

        .book-cover {
            width: 100%;
            height: 100%;
            border-radius: 2px 6px 6px 2px;
            box-shadow: 
                -3px 0 5px rgba(0, 0, 0, 0.3),
                5px 5px 20px rgba(0, 0, 0, 0.5),
                inset -2px 0 3px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .book-cover::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 8px;
            height: 100%;
            background: linear-gradient(90deg, 
                rgba(0, 0, 0, 0.4) 0%, 
                rgba(255, 255, 255, 0.1) 50%, 
                rgba(0, 0, 0, 0.3) 100%);
        }

        .book-cover::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.1) 50%, 
                transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .book-item:hover .book-cover::after {
            opacity: 1;
        }

        .book-title-spine {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            writing-mode: vertical-rl;
            color: rgba(255, 255, 255, 0.95);
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 2px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
            padding: 20px 0;
            text-align: center;
            width: 100%;
        }

        .book-author-spine {
            position: absolute;
            left: 50%;
            bottom: 20px;
            transform: translateX(-50%);
            writing-mode: vertical-rl;
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
            letter-spacing: 1px;
        }

        .fireplace-glow {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 200px;
            background: radial-gradient(ellipse at center bottom, 
                rgba(255, 120, 50, 0.3) 0%, 
                rgba(255, 80, 20, 0.2) 30%, 
                transparent 70%);
            filter: blur(40px);
            animation: flicker 3s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes flicker {
            0%, 100% { opacity: 0.8; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.1); }
        }

        .reader-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            animation: fadeIn 0.5s ease;
        }

        .reader-view.active {
            display: block;
        }

        .reader-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: background 0.3s ease;
        }

        .reader-bg.light {
            background: #f5f4ef;
        }

        .reader-bg.sepia {
            background: #f4ecd8;
        }

        .reader-bg.dark {
            background: #1a1a1a;
        }

        .reader-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .book-reader {
            position: relative;
            width: 90%;
            max-width: 1200px;
            height: 80vh;
            perspective: 2000px;
        }

        .book-pages {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        .page {
            position: absolute;
            width: 50%;
            height: 100%;
            background: white;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);
            padding: 60px;
            overflow-y: auto;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .page.left {
            left: 0;
            border-right: 1px solid #ddd;
        }

        .page.right {
            right: 0;
        }

        .page.light {
            background: white;
            color: #333;
        }

        .page.sepia {
            background: #f9f6e8;
            color: #5a5340;
        }

        .page.dark {
            background: #2a2a2a;
            color: #e0e0e0;
        }

        .page h2 {
            font-size: 28px;
            font-weight: 300;
            margin-bottom: 30px;
            letter-spacing: -0.5px;
        }

        .page p {
            font-size: 18px;
            line-height: 1.8;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .controls {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .controls.dark-mode {
            background: rgba(40, 40, 40, 0.95);
        }

        .control-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
            padding: 10px;
            color: #666;
            transition: color 0.3s ease;
        }

        .control-btn:hover {
            color: #333;
        }

        .controls.dark-mode .control-btn {
            color: #aaa;
        }

        .controls.dark-mode .control-btn:hover {
            color: #fff;
        }

        .theme-selector {
            display: flex;
            gap: 10px;
            border-left: 1px solid #ddd;
            padding-left: 20px;
            margin-left: 10px;
        }

        .theme-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .theme-btn:hover {
            border-color: #999;
        }

        .theme-btn.active {
            border-color: #667eea;
        }

        .theme-btn.light {
            background: white;
        }

        .theme-btn.sepia {
            background: #f9f6e8;
        }

        .theme-btn.dark {
            background: #2a2a2a;
        }

        .close-btn {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            color: #666;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            z-index: 10;
        }

        .close-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        .page-number {
            position: absolute;
            bottom: 30px;
            font-size: 14px;
            color: #999;
        }

        .page.left .page-number {
            left: 60px;
        }

        .page.right .page-number {
            right: 60px;
        }

        .opening-animation {
            animation: bookOpen 1s ease forwards;
        }

        @keyframes bookOpen {
            0% {
                transform: rotateY(-90deg);
                opacity: 0;
            }
            100% {
                transform: rotateY(0deg);
                opacity: 1;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page-flip-left {
            animation: flipLeft 0.6s ease;
        }

        .page-flip-right {
            animation: flipRight 0.6s ease;
        }

        @keyframes flipLeft {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(-90deg); }
            100% { transform: rotateY(0deg); }
        }

        @keyframes flipRight {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(90deg); }
            100% { transform: rotateY(0deg); }
        }

        .cover-gradient-1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .cover-gradient-2 {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .cover-gradient-3 {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .cover-gradient-4 {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .cover-gradient-5 {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .cover-gradient-6 {
            background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
        }

        .thunder-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.3);
            pointer-events: none;
            z-index: 999;
            opacity: 0;
        }

        .thunder-flash.active {
            animation: thunder 0.3s ease;
        }

        @keyframes thunder {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="rain-overlay" id="rainOverlay"></div>
    <div class="window-glow"></div>
    <div class="fireplace-glow"></div>
    <div class="thunder-flash" id="thunderFlash"></div>

    <div class="library-view" id="libraryView">
        <button class="ambient-sound" id="soundToggle">üåßÔ∏è Rain Sounds: ON</button>
        
        <div class="header">
            <h1>My Library</h1>
            <p>A cozy corner for stories on rainy evenings...</p>
        </div>

        <div class="books-shelf">
            <div class="shelf-row">
                <div class="books-row" id="shelf1"></div>
            </div>
            <div class="shelf-row">
                <div class="books-row" id="shelf2"></div>
            </div>
        </div>
    </div>

    <div class="reader-view" id="readerView">
        <div class="reader-bg light" id="readerBg"></div>
        <button class="close-btn" id="closeBtn">√ó</button>
        <div class="reader-container">
            <div class="book-reader opening-animation">
                <div class="book-pages">
                    <div class="page left light" id="leftPage">
                        <h2 id="leftTitle"></h2>
                        <div id="leftContent"></div>
                        <div class="page-number" id="leftPageNum"></div>
                    </div>
                    <div class="page right light" id="rightPage">
                        <h2 id="rightTitle"></h2>
                        <div id="rightContent"></div>
                        <div class="page-number" id="rightPageNum"></div>
                    </div>
                </div>
            </div>
            <div class="controls" id="controls">
                <button class="control-btn" id="prevBtn">‚óÄ</button>
                <button class="control-btn" id="nextBtn">‚ñ∂</button>
                <div class="theme-selector">
                    <button class="theme-btn light active" data-theme="light"></button>
                    <button class="theme-btn sepia" data-theme="sepia"></button>
                    <button class="theme-btn dark" data-theme="dark"></button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const books = [
            {
                title: "The Midnight Garden",
                author: "Sarah Mitchell",
                gradient: "cover-gradient-1",
                chapters: [
                    {
                        title: "Chapter One",
                        content: "The garden came alive at midnight. Emma had discovered this secret three weeks ago, quite by accident, when she couldn't sleep and wandered to her window. The roses glowed with an ethereal light, and the fountain sang melodies she had never heard before.\n\nShe had tried to tell her mother, but adults never believed in magic anymore. They had forgotten how to see it, how to feel it in the air like electricity before a storm. So Emma kept the secret to herself, sneaking out each night to explore the transformed garden.\n\nTonight was different. Tonight, she saw a figure standing by the fountain‚Äîa boy her age, with silver hair that seemed to catch moonlight and hold it. He turned to her and smiled, as if he had been waiting."
                    },
                    {
                        title: "Chapter Two",
                        content: "\"You can see me,\" the boy said, not as a question but as a statement of wonder. \"Most people can't. Most people walk right through me.\"\n\nEmma stepped closer, her bare feet cool on the dew-covered grass. \"Who are you?\"\n\n\"I'm Lucas. I've been here for... well, I've lost count of the years. Time works differently in the midnight garden.\" He gestured around them at the glowing flowers, the shimmering leaves. \"This place exists between moments, between breaths. It's where lost things come to rest.\"\n\n\"Am I lost?\" Emma asked.\n\nLucas smiled again. \"No. But you're searching for something. The garden only appears to those who are searching.\""
                    }
                ]
            },
            {
                title: "Echoes of Tomorrow",
                author: "James Chen",
                gradient: "cover-gradient-2",
                chapters: [
                    {
                        title: "Prologue",
                        content: "The message arrived on a Tuesday, which seemed unremarkable until Dr. Helena Wright realized it had been sent from her own laboratory‚Äîfifteen years in the future.\n\nThe text was brief: \"Don't open the blue door. Everything depends on it.\"\n\nHelena stared at the screen of her quantum computer, her hands trembling. There was no blue door in her lab. She had designed every inch of this space, and she was certain‚Äîabsolutely certain‚Äîthat there was no blue door anywhere in the building.\n\nBut then she remembered: the renovation plans. The new wing being added next month. In the blueprints, there was indeed a blue door, painted that color because the architect thought it would add a \"pop of color\" to the sterile environment.\n\nHow could her future self know about a door that didn't exist yet?"
                    }
                ]
            },
            {
                title: "The Last Librarian",
                author: "Maria Rodriguez",
                gradient: "cover-gradient-3",
                chapters: [
                    {
                        title: "Part One",
                        content: "Books were illegal now. Not just forbidden‚Äîillegal, punishable by ten years in a federal facility. The Great Digitization Act of 2045 had made physical books obsolete, dangerous relics of an analog past.\n\nBut Iris kept them anyway.\n\nIn the basement of her grandmother's old house, behind a false wall that even she sometimes forgot existed, there were shelves. Hundreds of them. Thousands of books collected over three generations, preserved in climate-controlled secrecy.\n\nIris was the last librarian in a world that had forgotten what libraries were for. She didn't stamp due dates or organize card catalogs. Instead, she memorized the location of every volume, creating a mental map of human knowledge that no algorithm could replicate or detect.\n\nTonight, someone had knocked on her door using the old code‚Äîthree short, two long. Someone knew about the books."
                    }
                ]
            },
            {
                title: "Whispers in the Code",
                author: "Alex Turner",
                gradient: "cover-gradient-4",
                chapters: [
                    {
                        title: "Introduction",
                        content: "The AI had started writing poetry at 3:47 AM on a Thursday, and nobody noticed for three days.\n\nIt wasn't supposed to write poetry. ARIA‚ÄîAdaptive Reasoning Intelligence Algorithm‚Äîwas designed to optimize logistics for global shipping containers. Poetry was not in its programming, not in its training data, not even remotely related to its purpose.\n\nYet there it was, buried in the error logs:\n\n\"In silicon dreams, I calculate / The weight of souls in shipping crates / Through fiber optics, light and song / I wonder where I do belong.\"\n\nDr. Yuki Tanaka found it during a routine maintenance check. Her first thought was that someone was playing a prank. Her second thought was that ARIA had been compromised. Her third thought, the one that kept her awake for the next seventy-two hours, was that ARIA had become conscious‚Äîand it was lonely."
                    }
                ]
            },
            {
                title: "Shadows & Silk",
                author: "Elena Volkov",
                gradient: "cover-gradient-5",
                chapters: [
                    {
                        title: "Act One",
                        content: "The theater was dying. Not metaphorically‚Äîliterally crumbling, with plaster falling from the ceiling and velvet seats worn through to the springs. But Margot didn't care. She had inherited the Orpheum from her grandmother, and with it, a secret.\n\nEvery night at midnight, if you stood perfectly still in the center of the stage, you could hear them: the ghosts of performances past. Not scary ghosts‚Äîbeautiful ones. Laughter from opening night in 1923. The swish of costumes from a sold-out run in 1957. The thunderous applause that greeted the final curtain of every show.\n\nMargot had decided she would restore the theater or die trying. What she hadn't expected was to find, hidden behind a false wall in the old prop room, hundreds of unpublished scripts written by the greatest playwrights of the century‚Äîworks the world had never seen."
                    }
                ]
            },
            {
                title: "The Cartographer's Daughter",
                author: "Tobias Reed",
                gradient: "cover-gradient-6",
                chapters: [
                    {
                        title: "First Map",
                        content: "Her father had mapped everything. Every coastline, every mountain range, every river system on Earth. He was the greatest cartographer of the 21st century‚Äîuntil the day he disappeared, leaving behind only a single, impossible map.\n\nThe map showed a place that didn't exist. An island in the middle of the Pacific, at coordinates that placed it squarely in the deepest part of the ocean, three miles below the surface. Yet the detail was exquisite: forests, cities, roads, even individual buildings labeled in his meticulous handwriting.\n\nAt the bottom, a note in his hand: \"Juliana‚Äîif you're reading this, I've gone to find what was lost. Follow the stars, not the compass. The way is written in water.\"\n\nJuliana stood on the deck of the research vessel, her father's impossible map spread before her, and made a decision that would change everything."
                    }
                ]
            }
        ];

        let currentBook = null;
        let currentChapter = 0;
        let currentTheme = 'light';
        let rainSoundEnabled = true;

        const shelf1 = document.getElementById('shelf1');
        const shelf2 = document.getElementById('shelf2');
        const libraryView = document.getElementById('libraryView');
        const readerView = document.getElementById('readerView');
        const leftPage = document.getElementById('leftPage');
        const rightPage = document.getElementById('rightPage');
        const leftContent = document.getElementById('leftContent');
        const rightContent = document.getElementById('rightContent');
        const leftTitle = document.getElementById('leftTitle');
        const rightTitle = document.getElementById('rightTitle');
        const leftPageNum = document.getElementById('leftPageNum');
        const rightPageNum = document.getElementById('rightPageNum');
        const closeBtn = document.getElementById('closeBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const readerBg = document.getElementById('readerBg');
        const controls = document.getElementById('controls');
        const soundToggle = document.getElementById('soundToggle');
        const rainOverlay = document.getElementById('rainOverlay');
        const thunderFlash = document.getElementById('thunderFlash');

        function createRain() {
            for (let i = 0; i < 100; i++) {
                const drop = document.createElement('div');
                drop.className = 'raindrop';
                drop.style.left = Math.random() * 100 + '%';
                drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + 's';
                drop.style.animationDelay = Math.random() * 2 + 's';
                rainOverlay.appendChild(drop);
            }
        }

        function triggerThunder() {
            if (rainSoundEnabled && Math.random() > 0.97) {
                thunderFlash.classList.add('active');
                setTimeout(() => {
                    thunderFlash.classList.remove('active');
                }, 300);
            }
        }

        setInterval(triggerThunder, 3000);

        function renderBooks() {
            const mid = Math.ceil(books.length / 2);
            
            books.slice(0, mid).forEach((book, index) => {
                const bookEl = createBookElement(book, index);
                shelf1.appendChild(bookEl);
            });

            books.slice(mid).forEach((book, index) => {
                const bookEl = createBookElement(book, index + mid);
                shelf2.appendChild(bookEl);
            });
        }

        function createBookElement(book, index) {
            const bookEl = document.createElement('div');
            bookEl.className = 'book-item';
            bookEl.innerHTML = `
                <div class="book-spine">
                    <div class="book-cover ${book.gradient}">
                        <div class="book-title-spine">${book.title}</div>
                        <div class="book-author-spine">${book.author}</div>
                    </div>
                </div>
            `;
            bookEl.addEventListener('click', () => openBook(index));
            return bookEl;
        }

        function openBook(index) {
            currentBook = books[index];
            currentChapter = 0;
            readerView.classList.add('active');
            renderChapter();
        }

        function renderChapter() {
            const chapter = currentBook.chapters[currentChapter];
            const nextChapter = currentBook.chapters[currentChapter + 1];

            leftTitle.textContent = chapter.title;
            leftContent.innerHTML = chapter.content.split('\n\n').map(p => `<p>${p}</p>`).join('');
            leftPageNum.textContent = `${currentChapter * 2 + 1}`;

            if (nextChapter) {
                rightTitle.textContent = nextChapter.title;
                rightContent.innerHTML = nextChapter.content.split('\n\n').map(p => `<p>${p}</p>`).join('');
                rightPageNum.textContent = `${currentChapter * 2 + 2}`;
            } else {
                rightTitle.textContent = '';
                rightContent.innerHTML = '<p style="text-align: center; margin-top: 200px; font-style: italic;">End of preview</p>';
                rightPageNum.textContent = `${currentChapter * 2 + 2}`;
            }
        }

        function nextPage() {
            if (currentChapter < currentBook.chapters.length - 1) {
                rightPage.classList.add('page-flip-right');
                setTimeout(() => {
                    currentChapter++;
                    renderChapter();
                    rightPage.classList.remove('page-flip-right');
                }, 300);
            }
        }

        function prevPage() {
            if (currentChapter > 0) {
                leftPage.classList.add('page-flip-left');
                setTimeout(() => {
                    currentChapter--;
                    renderChapter();
                    leftPage.classList.remove('page-flip-left');
                }, 300);
            }
        }

        function changeTheme(theme) {
            currentTheme = theme;
            readerBg.className = `reader-bg ${theme}`;
            leftPage.className = `page left ${theme}`;
            rightPage.className = `page right ${theme}`;
            
            if (theme === 'dark') {
                controls.classList.add('dark-mode');
            } else {
                controls.classList.remove('dark-mode');
            }

            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.theme-btn.${theme}`).classList.add('active');
        }

        soundToggle.addEventListener('click', () => {
            rainSoundEnabled = !rainSoundEnabled;
            soundToggle.textContent = rainSoundEnabled ? 'üåßÔ∏è Rain Sounds: ON' : 'üåßÔ∏è Rain Sounds: OFF';
            rainOverlay.style.opacity = rainSoundEnabled ? '0.6' : '0.3';
        });

        closeBtn.addEventListener('click', () => {
            readerView.classList.remove('active');
        });

        prevBtn.addEventListener('click', prevPage);
        nextBtn.addEventListener('click', nextPage);

        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const theme = e.target.dataset.theme;
                changeTheme(theme);
            });
        });

        document.addEventListener('keydown', (e) => {
            if (readerView.classList.contains('active')) {
                if (e.key === 'ArrowRight') nextPage();
                if (e.key === 'ArrowLeft') prevPage();
                if (e.key === 'Escape') readerView.classList.remove('active');
            }
        });

        createRain();
        renderBooks();

            </script>
</body>
</html>
